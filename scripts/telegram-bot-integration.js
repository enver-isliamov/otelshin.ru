// ü§ñ –ü–û–õ–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê TELEGRAM –ë–û–¢–ê –î–õ–Ø OTELSHIN

console.log(`
üöÄ –ù–ê–°–¢–†–û–ô–ö–ê TELEGRAM –ò–ù–¢–ï–ì–†–ê–¶–ò–ò –î–õ–Ø OTELSHIN

üìã –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô:
1. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook –Ω–∞ Vercel
3. –°–æ–∑–¥–∞–Ω–∏–µ API endpoint
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
`)

// –®–ê–ì 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞
console.log(`
ü§ñ –®–ê–ì 1: –°–û–ó–î–ê–ù–ò–ï TELEGRAM –ë–û–¢–ê

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ @BotFather
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É: /newbot
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞: OtelShin Bot
4. –í–≤–µ–¥–∏—Ç–µ username: @otelshin_bot (–∏–ª–∏ –ª—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π)
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω!

–ü–†–ò–ú–ï–† –¢–û–ö–ï–ù–ê: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz

6. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–æ—Ç–∞:
   /setdescription - –ë–æ—Ç –¥–ª—è –ø—Ä–∏–µ–º–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —à–∏–Ω
   /setabouttext - OtelShin - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —à–∏–Ω –≤ –°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª–µ
   /setuserpic - –∑–∞–≥—Ä—É–∑–∏—Ç–µ –ª–æ–≥–æ—Ç–∏–ø –∫–æ–º–ø–∞–Ω–∏–∏
`)

// –®–ê–ì 2: –ü–æ–ª—É—á–µ–Ω–∏–µ Chat ID
console.log(`
üí¨ –®–ê–ì 2: –ü–û–õ–£–ß–ï–ù–ò–ï CHAT ID –ú–ï–ù–ï–î–ñ–ï–†–ê

1. –ú–µ–Ω–µ–¥–∂–µ—Ä –¥–æ–ª–∂–µ–Ω –Ω–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É /start
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_TOKEN):
   https://api.telegram.org/botYOUR_TOKEN/getUpdates

3. –ù–∞–π–¥–∏—Ç–µ –≤ –æ—Ç–≤–µ—Ç–µ:
   "chat": {"id": 123456789, "first_name": "Manager"}
   
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ —á–∏—Å–ª–æ (123456789) - —ç—Ç–æ Chat ID –º–µ–Ω–µ–¥–∂–µ—Ä–∞
`)

// –®–ê–ì 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Vercel
console.log(`
‚öôÔ∏è –®–ê–ì 3: –ù–ê–°–¢–†–û–ô–ö–ê –ü–ï–†–ï–ú–ï–ù–ù–´–• –í VERCEL

1. –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ vercel.com
2. Settings ‚Üí Environment Variables
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

   TELEGRAM_BOT_TOKEN = –≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
   TELEGRAM_CHAT_ID = chat_id_–º–µ–Ω–µ–¥–∂–µ—Ä–∞
   TELEGRAM_WEBHOOK_SECRET = —Å–ª—É—á–∞–π–Ω–∞—è_—Å—Ç—Ä–æ–∫–∞_–¥–ª—è_–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

4. –ù–∞–∂–º–∏—Ç–µ Save –∏ Redeploy –ø—Ä–æ–µ–∫—Ç
`)

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Webhook
async function setupWebhook() {
  const botToken = process.env.TELEGRAM_BOT_TOKEN
  const webhookUrl = `https://otelshin.vercel.app/api/telegram-webhook`

  try {
    const response = await fetch(`https://api.telegram.org/bot${botToken}/setWebhook`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        url: webhookUrl,
        allowed_updates: ["message"],
        drop_pending_updates: true,
      }),
    })

    const result = await response.json()
    console.log("Webhook setup result:", result)

    if (result.ok) {
      console.log("‚úÖ Webhook —É—Å–ø–µ—à–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!")
    } else {
      console.log("‚ùå –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Webhook:", result.description)
    }
  } catch (error) {
    console.error("‚ùå –û—à–∏–±–∫–∞:", error)
  }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
async function sendTestMessage() {
  const botToken = process.env.TELEGRAM_BOT_TOKEN
  const chatId = process.env.TELEGRAM_CHAT_ID

  const testMessage = `üß™ <b>–¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ OtelShin</b>

‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!
üìÖ –í—Ä–µ–º—è: ${new Date().toLocaleString("ru-RU")}

üöó –¢–µ–ø–µ—Ä—å –≤—Å–µ –∑–∞—è–≤–∫–∏ —Å —Å–∞–π—Ç–∞ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —Å—é–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.`

  try {
    const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        chat_id: chatId,
        text: testMessage,
        parse_mode: "HTML",
      }),
    })

    const result = await response.json()

    if (result.ok) {
      console.log("‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!")
    } else {
      console.log("‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:", result.description)
    }
  } catch (error) {
    console.error("‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏:", error)
  }
}

console.log(`
üîß –®–ê–ì 4: –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò

1. –ö–û–ú–ê–ù–î–´ –ë–û–¢–ê (–æ—Ç–ø—Ä–∞–≤—å—Ç–µ @BotFather):
   /setcommands
   
   start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
   help - –ü–æ–º–æ—â—å –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
   status - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
   stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞—è–≤–æ–∫

2. –ù–ê–°–¢–†–û–ô–ö–ê –ú–ï–ù–Æ:
   /setmenubutton
   –¢–µ–∫—Å—Ç: "–°–∞–π—Ç OtelShin"
   URL: https://otelshin.vercel.app

3. –ü–†–ò–í–ê–¢–ù–û–°–¢–¨:
   /setprivacy - Disabled (—á—Ç–æ–±—ã –±–æ—Ç –≤–∏–¥–µ–ª –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø–∞—Ö)

4. –ì–†–£–ü–ü–ê –î–õ–Ø –ó–ê–Ø–í–û–ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É "OtelShin –ó–∞—è–≤–∫–∏"
   - –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É
   - –°–¥–µ–ª–∞–π—Ç–µ –±–æ—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ID –≥—Ä—É–ø–ø—ã –≤–º–µ—Å—Ç–æ –ª–∏—á–Ω–æ–≥–æ —á–∞—Ç–∞
`)

console.log(`
üìä –®–ê–ì 5: –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –ê–ù–ê–õ–ò–¢–ò–ö–ê

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:

1. üìà –ê–ù–ê–õ–ò–¢–ò–ö–ê –ë–û–¢–ê:
   - @BotAnalytics_bot - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - @Botan_bot - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

2. üîî –ú–û–ù–ò–¢–û–†–ò–ù–ì:
   - UptimeRobot - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
   - Sentry - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

3. üìù –õ–û–ì–ò–†–û–í–ê–ù–ò–ï:
   - Vercel Functions Logs
   - Telegram Bot API logs
`)

// –≠–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
if (typeof module !== "undefined" && module.exports) {
  module.exports = {
    setupWebhook,
    sendTestMessage,
  }
}

console.log(`
üéØ –ò–¢–û–ì–û–í–´–ô –ß–ï–ö–õ–ò–°–¢:

‚ñ° –°–æ–∑–¥–∞–ª –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
‚ñ° –ü–æ–ª—É—á–∏–ª —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
‚ñ° –ü–æ–ª—É—á–∏–ª Chat ID –º–µ–Ω–µ–¥–∂–µ—Ä–∞  
‚ñ° –î–æ–±–∞–≤–∏–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Vercel
‚ñ° –ù–∞—Å—Ç—Ä–æ–∏–ª Webhook
‚ñ° –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
‚ñ° –ù–∞—Å—Ç—Ä–æ–∏–ª –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
‚ñ° –î–æ–±–∞–≤–∏–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

üöÄ –ì–û–¢–û–í–û! –¢–µ–ø–µ—Ä—å –≤—Å–µ –∑–∞—è–≤–∫–∏ —Å —Å–∞–π—Ç–∞ OtelShin –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤ Telegram!
`)
